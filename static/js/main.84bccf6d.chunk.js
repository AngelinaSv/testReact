(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var i=a(3),r=a.n(i),n=a(30),s=a.n(n),o=(a(39),a(4)),c=a(5),l=a(11),u=a(7),p=a(6),h=a(1),d=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(h.jsx)("tr",{children:this.props.headers.map((function(e){return Object(h.jsx)("th",{className:"table-header-cell ",children:e})}))})}}]),a}(i.Component),m=a(33),j=a(8),f=a.n(j),b=new(function(){function e(){Object(o.a)(this,e),this.phoneCache=new Map,this.emailCache=new Map}return Object(c.a)(e,[{key:"addPhone",value:function(e,t){this.phoneCache.set(e,t)}},{key:"addEmail",value:function(e,t){this.emailCache.set(e,t)}},{key:"getPhoneDuplicates",value:function(e){return this.phoneCache.get(e)}},{key:"getEmailDuplicates",value:function(e){return this.emailCache.get(e)}}]),e}());function v(e,t){for(var a,i={},r=0,n=Object.entries(e);r<n.length;r++){var s=Object(m.a)(n[r],2),o=s[0],c=s[1];if("age"===o&&(a=c,i[o]={value:c,isCorrect:f.a.isInt(c,{min:21})}),"experience"===o&&(i[o]={value:c,isCorrect:f.a.isInt(c,{min:0,max:a})}),"email"===o){if(!c)throw new Error("Incorrect file");var l=c.toLowerCase(),u=b.getEmailDuplicates(l),p=void 0;if(u?u.push(e.id):b.addEmail(l,[e.id]),b.getEmailDuplicates(l).length>1){var h=t.get(u[0]);h.email.duplicateWithEmail||(h.email.duplicateWithEmail=e.id)}p=!(!b.getEmailDuplicates(l)[0]||e.id!==b.getEmailDuplicates(l)[0])&&f.a.isEmail(l),i[o]={value:c,isCorrect:p,duplicateWithEmail:b.getEmailDuplicates(l).length>1?b.getEmailDuplicates(l)[0]:null}}if("phone"===o){if(!c)throw new Error("Incorrect file");var d=c.toLowerCase(),j=b.getPhoneDuplicates(d),v=void 0;if(j?j.push(e.id):b.addPhone(d,[e.id]),b.getPhoneDuplicates(d).length>1){var O=t.get(j[0]);O.phone.duplicateWithPhone||(O.phone.duplicateWithPhone=e.id)}v=!(!b.getPhoneDuplicates(d)[0]||e.id!==b.getPhoneDuplicates(d)[0])&&/^\+?1?\d{10}$/.test(c),i[o]={value:c,isCorrect:v,duplicateWithPhone:b.getPhoneDuplicates(d).length>1?b.getPhoneDuplicates(d)[0]:null}}if("license states"===o&&(i[o]={value:c,isCorrect:/^([A-Z]{2}|([A-Z]{1}[a-z]+)?\|?)+$/.test(c)&&"|"!==c[0]&&"|"!==c[c.length-1]}),"expiration date"===o){var g=new Date,w=new Date(c);i[o]={value:c,isCorrect:(f.a.isDate(c,{format:"YYYY-MM-DD",delimiters:["-"]})||f.a.isDate(c,{format:"MM/DD/YYYY",delimiters:["/"]}))&&w.getTime()>g.getTime()}}if("has children"===o&&(i[o]={value:c,isCorrect:!c||f.a.isBoolean(c.toLowerCase())}),"license number"===o&&(i[o]={value:c,isCorrect:/^\w{6}$/.test(c)}),"full name"===o){if(!c)throw new Error("Incorrect file");i[o]={value:c,isCorrect:!0}}"yearly income"===o&&(i[o]={value:c,isCorrect:f.a.isDecimal(c,{decimal_digits:2})&&c<=1e6}),"id"===o&&(i[o]=c)}t.set(e.id,i)}var O={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"};var g=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e,t,a=this;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"table-cell",children:this.props.row.id}),Object.keys(this.props.row).map((function(e){var t,i="table-cell";return a.props.row[e].isCorrect||(i="table-cell-incorrect"),a.props.row[e]===a.props.row.id?null:a.props.row[e]!==a.props.row["has children"]||a.props.row[e].value?a.props.row[e]===a.props.row["license states"]?Object(h.jsx)("td",{className:i,children:(t=a.props.row[e].value,t.split("|").map((function(e){return e.length>2&&O[e]?O[e]:e})).join(", "))}):Object(h.jsx)("td",{className:i,children:a.props.row[e].value}):Object(h.jsx)("td",{className:i,children:"FALSE"})})),Object(h.jsx)("td",{className:"table-cell",children:(e=this.props.row.email.duplicateWithEmail,t=this.props.row.phone.duplicateWithPhone,e&&t?e<=t?e:t:e||t)})]})}}]),a}(i.Component),w=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){if(this.props.isLoading){var e=function(e){var t=e.map((function(e){return"id"===e?e.toUpperCase():e.replace(e[0],e[0].toUpperCase())}));return t.push("Duplicate with"),t}(Object.keys(this.props.data[0]).map((function(e){return e})));return Object(h.jsx)("div",{className:"table",children:Object(h.jsx)("table",{className:"user-table",children:Object(h.jsxs)("tbody",{children:[Object(h.jsx)(d,{headers:e}),this.props.data.map((function(e){return Object(h.jsx)(g,{row:e})}))]})})})}return this.props.err?Object(h.jsx)("div",{className:"error-msg-incorrect-format",children:Object(h.jsx)("text",{className:"error-msg-incorrect-format",children:this.props.err})}):Object(h.jsx)("div",{})}}]),a}(i.Component),C=a(16),D=a.n(C),x=a(34),y=a(31),N=a(32);function M(){return(M=Object(y.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var i=new Map,r=1;N.parse(t,{header:!0,dynamicTyping:!1,skipEmptyLines:!0,step:function(e,t){v(Object(x.a)({id:r++},e.data),i)},complete:function(){e(Array.from(i.values()))},transform:function(e,t){var a=e;return a=a.trim()},transformHeader:function(e){return e.toLowerCase().trim()}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).state={data:null,err:null},i.parse=i.parse.bind(Object(l.a)(i)),i}return Object(c.a)(a,[{key:"parse",value:function(e){var t=this;return"text/csv"!==e.target.files[0].type?this.setState({isLoading:!1,data:null,err:"File format is not correct"}):function(e){return M.apply(this,arguments)}(e.target.files[0]).then((function(e){t.setState({isLoading:!0,data:e,err:null})}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"header"}),Object(h.jsxs)("div",{className:"file-loader",children:[Object(h.jsx)("label",{for:"input",children:"Import users"}),Object(h.jsx)("input",{type:"file",id:"input",onChange:this.parse})]}),Object(h.jsx)(w,{isLoading:this.state.isLoading,data:this.state.data,err:this.state.err})]})}}]),a}(i.Component),E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,121)).then((function(t){var a=t.getCLS,i=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),i(e),r(e),n(e),s(e)}))};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(k,{})}),document.getElementById("root")),E()},39:function(e,t,a){}},[[120,1,2]]]);
//# sourceMappingURL=main.84bccf6d.chunk.js.map